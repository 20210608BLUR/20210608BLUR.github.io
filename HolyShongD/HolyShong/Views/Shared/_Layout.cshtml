
@{
    HttpCookie cookie = HttpContext.Current.Request.Cookies.Get(FormsAuthentication.FormsCookieName);

    string userid = "";
    if (cookie != null)
    {
        FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(cookie.Value);
        userid = ticket.UserData;
    }

    var address = new HolyShong.Services.AddressService().GetAddresses(1).AddressDetails;


}
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HolyShong | 給你送</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
          integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;300;500;900&display=swap"
          rel="stylesheet">
    <link href="~/Assets/CSS/layout1.css" rel="stylesheet" />



    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC8HcG_N0pXb-DuF-O0WI8nxa5ch7JnyoY&libraries=places&v=weekly"></script>
    <!-- toastr -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    @RenderSection("topJS", required: false)
    @RenderSection("topCSS", required: false)


</head>
<body>
    <input type="checkbox" class="d-none" id="menu-check">
    <header class="container">
        <div class="top">
            <div class="bg"></div>
            <div class="head d-flex">
                <label for="menu-check" class="hb"><i class="fas fa-bars align-middle"></i></label>
                <div class="logo m-auto">
                    <a class="d-block" href="/"><img src="~/Assets/Images/logo.jpg"></a>
                </div>
            </div>
            <div class="lookup">
                <!-- 地址/時間 -->

                @Html.Partial("_AddressPartialView")

                <div class="search ">
                    <div class="d-flex">
                        <label class="w-100">
                            <i class="fas fa-search p-2"></i>
                            <input type="text" name="keyword" id="keyword" class="border-none bg-transparent" onkeypress="uberSearch(event)" placeholder="想吃點什麼？">
                        </label>
                        <div data-toggle="modal" data-target="#cellphonesubcategorymodal" class="filter">
                            <i class="fas fa-sliders-h"></i>
                        </div>
                        @*<input value="搜尋" class="btn btn-primary p-0">*@
                    </div>
                </div>

            </div>
            <!-- 購物車&登入 -->
            <div class="status d-flex">
                <input type="checkbox" class="d-none" id="cart-check">
                <label for="cart-check" class="cart text-light px-3 py-2 p-lg-3 mr-1">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="d-none d-lg-block">購物車</span>
                </label>
                @Html.Partial("_CartPartial")
                <button class="noLogin login btn py-2" onclick="location.href='@Url.Action("Login", "Member")'">登入</button>

            </div>

            <div class="menu">
                <div class="loginShow name py-2 border-bottom">@userid</div>
                <div class="function loginShow">
                    <div class="account item" onclick="location.href='@Url.Action("UserProfile", "Member")'"><i class="fas fa-user"></i>帳戶資訊</div>
                    <div class="order item" onclick="location.href='@Url.Action("OrderList", "Member")'"><i class="fas fa-receipt"></i>歷史訂單</div>
                    <div class="favorite item" onclick="location.href='@Url.Action("FavoriteStore", "Member")'"><i class="fas fa-heart"></i>最愛餐廳</div>
                    <div class="discount item" data-toggle="modal" data-target="#discountModal">
                        <i class="fas fa-tag"></i>優惠
                    </div>
                    <div class="eatPass item text-success d-flex" onclick="location.href='@Url.Action("Eatpass", "Member")'">
                        <div><i class="fas fa-ticket-alt"></i></div>
                        <div>
                            <div>送送方案</div>
                            <span class="desc text-secondary">免費外送及行程費用折扣優惠</span>
                        </div>
                    </div>
                </div>
                <div class="switch">
                    <button class="loginShow btn btn w-100 mb-2" onclick="location.href='@Url.Action("Index", "Home")'">我想要訂餐</button>
                    <button class="loginShow btn btn w-100 mb-2" onclick="location.href='@Url.Action("RestaurantRegister", "Member")'">餐廳登入</button>
                    <button class="loginShow btn btn w-100 mb-2" onclick="location.href='@Url.Action("DeliverRegister", "Member")'">外送夥伴</button>
                    <button class="loginShow btn border-secondary w-100 mb-2" onclick="location.href='@Url.Action("SignOut", "Member")'">登出</button>
                    <button class="noLogin btn w-100 mb-2" onclick="location.href='@Url.Action("Login", "Member")'">請先登入</button>

                </div>
            </div>
        </div>
    </header>

    @RenderBody()

    <footer>
        <div class="container">
            <div class="footer-bottom">
                <div class="info-img">
                    <div class="logoBottom">
                        <img src="~/Assets/Images/logo.jpg">
                    </div>
                    <div class="item d-flex justify-content-lg-between">
                        <a href="https://www.facebook.com/buildschool.edu/"><i class="fab fa-facebook-square"></i></a>
                        <a href="https://www.build-school.com/"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.instagram.com/buildschool_edu/"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>

                <div class="item">
                    <div class="policy">
                        <a href="#">隱私政策</a>
                        <a href="#">條款</a>
                        <a href="#">價格</a>
                    </div>
                    <div class="copyright">
                        <span>本網站受到 reCAPTCHA 和 Google 隱私政策的保護，且適用服務條款。</span>
                        <span> &copy; Holy Shong Technologies Inc.</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- 時間地點Modal -->


    @Html.Partial("_DiscountPartial")


    <!-- Modal 團購訂單-->
    <div class="modal fade" id="groupOrder" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="">BS的團購訂單</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <P>邀請賓客使用可分享連結新增餐點。所有人都訂完後，再幫大家付款。</P>
                </div>
                <div class="modal-footer">
                    <div class="previewOrderDiv">
                        <button class="previewOrderBtn">
                            <div class="previewOrderSpan">建立訂單</div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    @*副分類篩選*@
    <div class="modal fade" id="cellphonesubcategorymodal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">篩選條件</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    @Html.Partial("_CellphoneSubCategoryPartial")
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js" integrity="sha512-u9akINsQsAkG9xjc1cnGF4zw5TFDwkxuc9vUp5dltDWYCSmyd0meygbvgXrlc/z7/o4a19Fb5V0OUE58J7dcyw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="~/Assets/JS/layout.js"></script>
    <script src="~/Assets/JS/Cart/cart.js" type="text/javascript"></script>
    <script src="~/Assets/JS/discount.js" type="text/javascript"></script>
    <script src="~/Assets/JS/Search/cellphonesubcategorysearch.js"></script>
    <!-- toastr -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    @RenderSection("scripts", required: false)

    @RenderSection("endCSS", required: false)



    @if (User.Identity.IsAuthenticated)
    {
        <script>
            let noLogin = document.querySelectorAll('.noLogin');
            let loginShow = document.querySelectorAll(".loginShow");

            noLogin.forEach((item, index) => {
                item.classList.add("d-none")
            })
            loginShow.forEach((item, index) => {
                item.classList.remove("d-none")
            })
        </script>
    }
    else
    {
        <script>
            let noLogin = document.querySelectorAll('.noLogin');
            let loginShow = document.querySelectorAll(".loginShow");

            noLogin.forEach((item, index) => {
                item.classList.remove("d-none")
            })
            loginShow.forEach((item, index) => {
                item.classList.add("d-none")
            })
        </script>
    }

    @RenderSection("endJS", required: false)

</body>
</html>
